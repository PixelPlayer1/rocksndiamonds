[![Build Status](https://travis-ci.com/tuero/rocksndiamonds.svg?token=zarvik1a4n45zBNhaz4z&branch=master)](https://travis-ci.com/tuero/rocksndiamonds)
[![Generic badge](https://img.shields.io/badge/Artsoft_version-v4.1.4.1-green.svg)](https://shields.io/)
[![GitHub release](https://img.shields.io/github/v/tag/tuero/rocksndiamonds)](https://img.shields.io/github/v/tag/tuero/rocksndiamonds)
[![GitHub language](https://img.shields.io/badge/language-C/C++-blue.svg)](https://img.shields.io/badge/language-C/C++-blue.svg)



# Rocks'n'Diamonds
![Github Logo](/docs/media/rnd_demo_run.gif)
[Rocks'n'Diamonds](https://www.artsoft.org/) is an open source C arcade style game based off Boulder Dash (Commodore 64), Emerald Mine (Amiga), Supaplex (Amiga/PC) and Sokoban (PC). This project uses the open source engine provided by the folks at [Artsoft Entertainment](https://www.artsoft.org/), and extends it with features such as
- Easily add your own AI controller to play the levels
- Library functions to help access the engine state and query item locations/properties
- Ability to replay the levels using the actions the AI agent made
- Comprehensive logging

## Version
The project keeps up to date from the original game repository located [here](https://git.artsoft.org/rocksndiamonds.git/). This project is currently on Artsoft's v4.1.4.1.

## Libraries
The following header only libraries are used in this project. They are included as git submodules, so it is recommended you install them by using the `git --recurse-submodules` argument.
- [Catch2](https://github.com/catchorg/Catch2) (v2.11.0)
- [Plog](https://github.com/SergiusTheBest/plog) (v1.1.5)

Additionally, SDL2 is needed, and highly recommended, to run any the GUI version. In addition to the standard package, image, mixer, net, and ttf will also need to be installed.
```shell
sudo apt-get install libsdl2-dev libsdl2-image-dev libsdl2-mixer-dev libsdl2-net-dev libsdl2-ttf-dev
```


## Installing
These instructions will help you install the program. It should compile fine on most systems, but YMMV. The following systems have been tested on:
- Ubuntu 18.04: gcc/g++ 7.4.0, gcc/g++ 8.3.0, Clang/Clang++ 6.0.0
- macOS Catalina 10.15.2: Apple Clang 11.0.0

To install this project, follow the below steps:
```shell
# Clone this repository
$ git clone --recurse-submodules https://github.com/tuero/rocksndiamonds.git

# Enter the repository
$ cd rocksndiamonds

# Compile
$ mkdir build && cd build
$ cmake ..
$ make -j8
$ cd ..

# Run the GUI program with user input
$ ./rocksndiamonds
```
For a detailed listing of the usage, see the [usage](docs/usage.md) section of the documents.

## Documentation
- [About the original client](docs/about_rnd.md)
- [Changes from the original client](docs/about_changes.md)
- [GUI vs Headless](docs/binaries.md)
- [Creating a basic controller](docs/controller.md)
- [Example controllers](docs/example_controllers.md)
- [Detailed controller features](docs/controller_detailed.md)
- [Accessing engine state and information](docs/engine.md)
- [Usage](docs/usage.md)
- [Logging](docs/logging.md)
- [Replay files](docs/replay.md)

# Changelog

## [v1.1](https://github.com/tuero/rocksndiamonds/tree/v1.1) (2020-02-11)
- Added simple pathing example controller
- Added safe options for isEmpty (isEmptySafe), isWalkable (isWalkableSafe), and isActionMoveable (isActionMoveableSafe). These have an added check to determine if moving into a cell would cause the player to immediately die from falling objects above.
- Base options have an added flag to determine if A* pathing should avoid immediate death cells (off by default)
- Added gridinfo function to get whether item was just falling
- Added graphics element RocksTouch.png so compiling doesn't depend on creating these elements from scratch

[Full Changelog](https://github.com/tuero/rocksndiamonds/compare/v1.0...v1.1)



\* *This Changelog was automatically generated by [github_changelog_generator](https://github.com/github-changelog-generator/github-changelog-generator)*

## License
This project is licensed under the GNU GPL version 2 License - see the [COPYING](COPYING) file for details.